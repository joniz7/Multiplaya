////////////////////////////////////////////////////////////
// Headers
////////////////////////////////////////////////////////////
// Class header
#include "../model/world.h"

#include <iostream>

#include "../global.h"
#include "Controller.h"

////////////////////////////////////////////////////////////
/// Controller class. Handles input.
////////////////////////////////////////////////////////////

namespace mp
{
	////////////////////////////////////////////////////////////
	// Constructor. Initializes the world.
	////////////////////////////////////////////////////////////
    Controller::Controller(World* model, WorldView* view, NetworkHandler* network)
    {
		this->model = model;
		this->view = view;
		this->currentPlayer = new Player();
		this->currentPlayer->setCharacter(model->getWorldData()->getCurrentCharacter());
		this->network = network;
    }

	////////////////////////////////////////////////////////////
	// The logic loop; updates the game world, runs Box2D etc.
	////////////////////////////////////////////////////////////
    void Controller::exec()
    {
		bool running = true;
		while(running) {
			model->exec();
			currentPlayer->update();
			network->sendCharacterPosToServer();
		}

    }

	////////////////////////////////////////////////////////////
	// Destructor
	////////////////////////////////////////////////////////////
    Controller::~Controller(){}

}